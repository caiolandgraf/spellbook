(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99206],{6132:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7220:(e,a,s)=>{"use strict";s.d(a,{SQ:()=>p,_2:()=>x,lp:()=>u,mB:()=>f,rI:()=>o,ty:()=>m});var t=s(95155),l=s(12115),r=s(47971),i=s(27937),c=s(5917),d=s(99051),n=s(25016);let o=r.bL,m=r.l9;r.YJ,r.ZL,r.Pb,r.z6,l.forwardRef((e,a)=>{let{className:s,inset:l,children:c,...d}=e;return(0,t.jsxs)(r.ZP,{ref:a,className:(0,n.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",s),...d,children:[c,(0,t.jsx)(i.A,{className:"ml-auto h-4 w-4"})]})}).displayName=r.ZP.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.G5,{ref:a,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})}).displayName=r.G5.displayName;let p=l.forwardRef((e,a)=>{let{className:s,sideOffset:l=4,...i}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{ref:a,sideOffset:l,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});p.displayName=r.UC.displayName;let x=l.forwardRef((e,a)=>{let{className:s,inset:l,...i}=e;return(0,t.jsx)(r.q7,{ref:a,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",s),...i})});x.displayName=r.q7.displayName,l.forwardRef((e,a)=>{let{className:s,children:l,checked:i,...d}=e;return(0,t.jsxs)(r.H_,{ref:a,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,a)=>{let{className:s,children:l,...i}=e;return(0,t.jsxs)(r.hN,{ref:a,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName;let u=l.forwardRef((e,a)=>{let{className:s,inset:l,...i}=e;return(0,t.jsx)(r.JU,{ref:a,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...i})});u.displayName=r.JU.displayName;let f=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.wv,{ref:a,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",s),...l})});f.displayName=r.wv.displayName},17181:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},26983:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},50803:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]])},56154:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},58877:(e,a,s)=>{Promise.resolve().then(s.bind(s,71986))},61362:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71986:(e,a,s)=>{"use strict";s.d(a,{SpellView:()=>v});var t=s(95155),l=s(12115),r=s(97003),i=s(67812),c=s(70353),d=s(10072),n=s(57828),o=s(75426),m=s(17181),p=s(83457),x=s(20017),u=s(11010),f=s(37135),h=s(7220),y=s(25016),g=s(15239),j=s(52619),N=s.n(j),w=s(18720);function v(e){let{spell:a,isOwner:s}=e,[j,v]=(0,l.useState)(!1),[b,k]=(0,l.useState)(!1),[A,z]=(0,l.useState)(!1),[R,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/spells/".concat(a.id,"/favorite")),s=await e.json();k(s.favorited)}catch(e){console.error("Error checking favorite:",e)}})()},[a.id]);let C=async()=>{await navigator.clipboard.writeText(a.code),v(!0),setTimeout(()=>v(!1),2e3)},_=async()=>{let e=window.location.href.replace("/dashboard/spell/","/spells/");await navigator.clipboard.writeText(e),w.oR.success("Link copied to clipboard! \uD83D\uDD17")},S=async()=>{z(!0);try{(await fetch("/api/spells/".concat(a.id,"/favorite"),{method:b?"DELETE":"POST"})).ok&&(k(!b),b?w.oR.success("Removed from favorites"):w.oR.success("Added to favorites! ❤️"))}catch(e){console.error("Error toggling favorite:",e),w.oR.error("Failed to update favorite")}finally{z(!1)}},T=async()=>{if(confirm("Are you sure you want to delete this spell? This action cannot be undone.")){E(!0);try{let e=await fetch("/api/spells/".concat(a.id),{method:"DELETE"});if(e.ok)w.oR.success("Spell deleted successfully! \uD83D\uDDD1️"),setTimeout(()=>{window.location.href="/spells"},1e3);else{let a=await e.json();w.oR.error(a.error||"Failed to delete spell")}}catch(e){console.error("Error deleting spell:",e),w.oR.error("Failed to delete spell")}finally{E(!1)}}};return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:a.title}),!a.isPublic&&(0,t.jsx)(i.Badge,{variant:"secondary",children:"Private"})]}),a.description&&(0,t.jsx)("p",{className:"text-muted-foreground text-lg mb-4",children:a.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a.user.image&&(0,t.jsx)(g.default,{src:a.user.image,alt:a.user.name||"User",width:24,height:24,className:"rounded-full"}),(0,t.jsx)(N(),{href:a.user.username?"/u/".concat(a.user.username):"#",className:"hover:text-primary transition-colors",children:a.user.name})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(0,y.kh)(a.language)}}),(0,t.jsx)("span",{className:"capitalize",children:a.language})]}),a.spellbook&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)(N(),{href:"/spellbooks/".concat(a.spellbook.id),className:"hover:text-primary transition-colors",children:a.spellbook.name})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(n.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[a.views," views"]})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(0,y.fw)(a.updatedAt)})]}),a.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:a.tags.map(e=>(0,t.jsxs)(i.Badge,{variant:"outline",children:["#",e]},e))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.$,{variant:"outline",size:"icon",onClick:C,children:(0,t.jsx)(o.A,{className:j?"text-primary":""})}),(0,t.jsx)(r.$,{variant:"outline",size:"icon",onClick:_,children:(0,t.jsx)(m.A,{})}),(0,t.jsx)(r.$,{variant:"outline",size:"icon",onClick:S,disabled:A,className:b?"text-red-500 border-red-500":"",children:(0,t.jsx)(p.A,{className:b?"fill-current":""})}),s&&(0,t.jsxs)(h.rI,{children:[(0,t.jsx)(h.ty,{asChild:!0,children:(0,t.jsx)(r.$,{variant:"outline",size:"icon",disabled:R,children:(0,t.jsx)(x.A,{})})}),(0,t.jsxs)(h.SQ,{align:"end",children:[(0,t.jsxs)(h._2,{onClick:()=>{window.location.href="/dashboard/spell/".concat(a.id,"/edit")},children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,t.jsxs)(h._2,{className:"text-red-500",onClick:T,disabled:R,children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),R?"Deleting...":"Delete"]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(c.B,{value:a.code,onChange:()=>{},language:a.language,readOnly:!0}),(0,t.jsx)(d.s,{code:a.code,language:a.language})]})]})}},75426:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},83457:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},85921:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(71847).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])}},e=>{e.O(0,[4545,52619,18720,306,14035,35933,43520,65943,46952,28441,31255,77358],()=>e(e.s=58877)),_N_E=e.O()}]);