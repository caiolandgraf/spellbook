(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53206],{7220:(e,s,a)=>{"use strict";a.d(s,{SQ:()=>p,_2:()=>u,lp:()=>x,mB:()=>f,rI:()=>c,ty:()=>m});var t=a(95155),r=a(12115),l=a(47971),i=a(27937),n=a(5917),o=a(99051),d=a(25016);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,s)=>{let{className:a,inset:r,children:n,...o}=e;return(0,t.jsxs)(l.ZP,{ref:s,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...o,children:[n,(0,t.jsx)(i.A,{className:"ml-auto h-4 w-4"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.G5,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.G5.displayName;let p=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:s,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});p.displayName=l.UC.displayName;let u=r.forwardRef((e,s)=>{let{className:a,inset:r,...i}=e;return(0,t.jsx)(l.q7,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...i})});u.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:i,...o}=e;return(0,t.jsxs)(l.H_,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...o,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.hN,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let x=r.forwardRef((e,s)=>{let{className:a,inset:r,...i}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...i})});x.displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});f.displayName=l.wv.displayName},14976:(e,s,a)=>{"use strict";a.d(s,{SpellViewPublic:()=>b});var t=a(95155),r=a(12115),l=a(97003),i=a(67812),n=a(70353),o=a(10072),d=a(52619),c=a.n(d),m=a(59865),p=a(57828),u=a(75426),x=a(17181),f=a(83457),h=a(20017),g=a(11010),j=a(37135),y=a(7220),N=a(25016),v=a(15239),w=a(18720);function b(e){var s,a;let{spell:d,isOwner:b,isLoggedIn:k}=e,[C,R]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[S,z]=(0,r.useState)(!1),[_,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{k&&(async()=>{try{let e=await fetch("/api/spells/".concat(d.id,"/favorite")),s=await e.json();E(s.favorited)}catch(e){console.error("Error checking favorite:",e)}})()},[d.id,k]);let F=async()=>{await navigator.clipboard.writeText(d.code),R(!0),w.oR.success("Code copied to clipboard! \uD83D\uDCCB"),setTimeout(()=>R(!1),2e3)},L=async()=>{let e=window.location.href;await navigator.clipboard.writeText(e),w.oR.success("Link copied to clipboard! \uD83D\uDD17")},T=async()=>{if(!k)return void w.oR.error("Please sign in to favorite spells");z(!0);try{(await fetch("/api/spells/".concat(d.id,"/favorite"),{method:A?"DELETE":"POST"})).ok&&(E(!A),A?w.oR.success("Removed from favorites"):w.oR.success("Added to favorites! ❤️"))}catch(e){console.error("Error toggling favorite:",e),w.oR.error("Failed to update favorite")}finally{z(!1)}},U=async()=>{if(confirm("Are you sure you want to delete this spell? This action cannot be undone.")){P(!0);try{let e=await fetch("/api/spells/".concat(d.id),{method:"DELETE"});if(e.ok)w.oR.success("Spell deleted successfully! \uD83D\uDDD1️"),setTimeout(()=>{window.location.href="/spells"},1e3);else{let s=await e.json();w.oR.error(s.error||"Failed to delete spell")}}catch(e){console.error("Error deleting spell:",e),w.oR.error("Failed to delete spell")}finally{P(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[!k&&(0,t.jsx)("div",{className:"bg-primary/10 border-b border-primary/20",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-4 h-4 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Want to save and run this spell?"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sign in to favorite, fork, and execute code"})]})]}),(0,t.jsxs)("a",{href:"/auth/signin",className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors text-sm font-medium",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),"Sign In"]})]})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:d.title}),!d.isPublic&&(0,t.jsx)(i.Badge,{variant:"secondary",children:"Private"})]}),d.description&&(0,t.jsx)("p",{className:"text-muted-foreground text-lg mb-4",children:d.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[d.user.image?(0,t.jsx)(v.default,{src:d.user.image,alt:d.user.name||"User",width:24,height:24,className:"rounded-full"}):(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center text-xs",children:(null==(a=d.user.name)||null==(s=a[0])?void 0:s.toUpperCase())||"?"}),(0,t.jsx)(c(),{href:d.user.username?"/u/".concat(d.user.username):"#",className:"font-medium hover:text-primary transition-colors",children:d.user.name})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(0,N.kh)(d.language)}}),(0,t.jsx)("span",{className:"capitalize",children:d.language})]}),d.spellbook&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["in ",d.spellbook.name]})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[d.views," views"]})]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(0,N.fw)(d.createdAt)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.$,{variant:"outline",size:"sm",onClick:F,disabled:C,children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),C?"Copied!":"Copy"]}),(0,t.jsxs)(l.$,{variant:"outline",size:"sm",onClick:L,children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Share"]}),k&&(0,t.jsxs)(l.$,{variant:A?"default":"outline",size:"sm",onClick:T,disabled:S,children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2 ".concat(A?"fill-current":"")}),A?"Favorited":"Favorite"]}),b&&(0,t.jsxs)(y.rI,{children:[(0,t.jsx)(y.ty,{asChild:!0,children:(0,t.jsx)(l.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})})}),(0,t.jsxs)(y.SQ,{align:"end",children:[(0,t.jsxs)(y._2,{onClick:()=>{window.location.href="/spells/".concat(d.id,"/edit")},children:[(0,t.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,t.jsxs)(y._2,{onClick:U,disabled:_,className:"text-destructive",children:[(0,t.jsx)(j.A,{className:"w-4 h-4 mr-2"}),_?"Deleting...":"Delete"]})]})]})]})]}),d.tags&&d.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.tags.map(e=>(0,t.jsxs)(i.Badge,{variant:"secondary",children:["#",e]},e))}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(n.B,{value:d.code,onChange:()=>{},language:d.language,readOnly:!0})}),k&&["javascript","js","typescript","ts","python","py","php","html","css","sql"].includes(d.language.toLowerCase())&&(0,t.jsx)(o.s,{code:d.code,language:d.language}),!k&&["javascript","js","typescript","ts","python","py","php","html","css","sql"].includes(d.language.toLowerCase())&&(0,t.jsxs)("div",{className:"border border-dashed border-primary/20 rounded-lg p-8 text-center space-y-3 bg-primary/5",children:[(0,t.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Sign in to run this code"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create a free account to execute code directly in your browser"}),(0,t.jsxs)("a",{href:"/auth/signin",className:"inline-flex items-center gap-2 px-6 py-3 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors font-medium",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),"Sign In to Run Code"]})]})]})]})}},45415:(e,s,a)=>{Promise.resolve().then(a.bind(a,14976)),Promise.resolve().then(a.t.bind(a,41402,23))}},e=>{e.O(0,[4545,52619,18720,306,14035,35933,43520,65943,10070,46952,28441,31255,77358],()=>e(e.s=45415)),_N_E=e.O()}]);